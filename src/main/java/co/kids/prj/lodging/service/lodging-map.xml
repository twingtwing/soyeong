<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="co.kids.prj.lodging.service.LodgingMapper">
	<select id="LodgingSelectList"
		parameterType="co.kids.prj.lodging.service.LodgingVO"
		resultType="co.kids.prj.lodging.service.LodgingVO">
		SELECT * FROM LODGING WHERE RCHECKIN<![CDATA[>]]> TO_DATE(#{rcheckin},'yyyy-mm-dd') AND RCHECKOUT <![CDATA[<]]>
		TO_DATE(#{rcheckout},'yyyy-mm-dd') AND RGUEST<![CDATA[>=]]>#{rguest}
		<if test='rcategory != "A"'>
		AND RCATEGORY=#{rcategory}
		</if>
		<if test='am1=="Y"'>
		AND AM1 in(#{am1})
		</if>
		<if test='am2=="Y"'>
		AND AM2 in(#{am2})
		</if>
		<if test='am3=="Y"'>
		AND AM3 in(#{am3})
		</if>
		<if test='am1=="N" and am2=="N" and am3=="N"'>
		AND RCATEGORY=RCATEGORY
		</if>
		AND RUSE NOT IN('Y') ORDER BY RCHECKIN, RGUEST ASC
	</select>
	
	<select id="LodgingSelect" resultType="co.kids.prj.lodging.service.LodgingVO">
		SELECT * FROM LODGING WHERE RNO = #{rno}
	</select>

	
	<update id="LodgingUpdateState" parameterType="String">
		UPDATE LODGING SET RUSE = #{ruse}
	</update>
	
	<update id="LodgingUpdateInfo" parameterType="co.kids.prj.lodging.service.LodgingVO">
		update lodging 
	</update>

	<insert id="LodgingInsert" parameterType="co.kids.prj.lodging.service.LodgingVO">
		insert into lodging values(
		rno = #{rno},
		id = #{id},
		rcategory = #{rcategory},
		rtype = #{rtype},
		rguest = #{rguest},
		rbed = #{rbed},
		rbath = #{rbath},
		rcontent = #{rcontent},
		fee = #{fee},
		am1 = #{am1},
		am2 = #{am2},
		am3 = #{am3},
		rphoto = #{rphoto},
		ruse = #{ruse},
		rcheckin = #{rcheckin},
		rcheckout = #{rcheckout},
		rname = #{rname}
		)
		
	</insert>

</mapper>